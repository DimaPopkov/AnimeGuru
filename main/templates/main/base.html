{% load static %}
<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="{% static './main/css.css' %}">
    <link rel="stylesheet" href="{% static './main/adaptive.css' %}">
    <title> {% block title %} {% endblock %} </title>
    <script src="{% static 'main/js/theme.js' %}"></script>
</head>
<body id="products-list-container" class="body">

    <header class = "main_items_background header">
        <!-- не могу нормальное название придумать :( )-->
        <div style="display:flex; align-items: center; column-gap: 10px;">
            <a id="btn_logo" class="btn_logo" href="{% url 'main' %}"> AnimeGuru </a>
            
            <!-- Кнопка смены темы в разработке -->
            
            <div class="header_change_style_button" onclick="ChangeTheme('{{ request.user.username }}')">
                <img id="img" src="{% static 'img/moon.png' %}" width="22px" data-sun="{% static 'img/sun.png' %}" data-moon="{% static 'img/moon.png' %}">
                <input id="theme_input" type="checkbox" style="width: 12px; height: 12px; display: none;">
            </div> 
           
        </div>
        <!-- <a class="btn btn-danger btn-auto" href="{% url 'about' %}"> О нас </a> -->
        
        {% if request.user.is_authenticated %}
            <div class="login_status_bar">
                <div style="display: flex;">
                    {% if request.user.profile.image != "avatars/null_avatar.png" %}
                        <img src={{ request.user.profile.image }} style="width: 35px; height: 35px; border-radius: 100px;">
                    {% else %}
                        <img src={{ request.user.profile.image.url }} style="width: 35px; height: 35px; border-radius: 100px;">
                    {% endif %}
                    <a id="nickname" href="{% url 'profile' %}" class = "login_status_bar_text"> {{ request.user.username }} </a>
                </div>
                <form action="{% url 'logout' %}" method="post" style="display:inline;">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-secondary">Выйти</button>
                </form>

                {% if request.user.is_superuser or request.user.is_staff %}
                    <a class="btn btn-info btn-auto" href="{% url 'create' %}"> Добавить </a>
                    <a class="btn btn-danger btn-auto" href="/admin"> Админка </a>
                {% endif %}
            </div>
        {% else %}
            <a class="login_button" href="{% url 'Login' %}">
                <img style="height: 50%" src="{% static "img/png-clipart-computer-icons-login-symbol-login-interface-miscellaneous-text.png" %}">
                <p style="margin-block-start: 0; margin-block-end: 0;"> Войти </p>
            </a> 
        {% endif %}
    </header>

    <main>
        {% block content %}
        {% endblock %}
    </main>
</body>
<script>
    window.currentTheme = "{{ request.session.courent_theme|escapejs }}"; 
    window.username = "{{ request.user.username|escapejs }}"; 
</script>
</html>